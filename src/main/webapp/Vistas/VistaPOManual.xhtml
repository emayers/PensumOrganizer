<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html" 
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions">
	
  <h:head>
  	<link rel="Stylesheet" type="text/css" href="./Style/manual.css?verison=1.5"/>
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,800,600"></link>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/css/materialize.min.css"></link>
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"></link>
	<link rel="stylesheet" href="bower_components/sweetalert2/dist/sweetalert2.min.css"></link>
  	
  	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
  	<script src="https://cdn.jsdelivr.net/sweetalert2/6.5.5/sweetalert2.min.js"></script>
  	<script type="text/javascript" src="Scripts/DropdownList.js?version=1"></script>
  	<script type="text/javascript" src="Scripts/MoveElements.js?version=1.0"></script>
  </h:head>
  
  <h:body>
    <nav id="navigationMenuTag">
		<h:panelGroup layout="block" id="menu" styleClass="nav-wrapper">
			<ul id="navigationBar"> 
				<li><h:link onclick="getLinkValue(this); PF('dialogToExit').show(); return false;" value="Página Principal" outcome="VistaDashboard">
					</h:link></li>
				<li><h:link onclick="getLinkValue(this); PF('dialogToExit').show(); return false;" value="Ver Historial" outcome="VistaHistorial"></h:link></li>
				<li><h:link onclick="getLinkValue(this); PF('dialogToExit').show(); return false;" value="Programa de la Carrera" outcome="VistaPrograma">
					</h:link></li>
				<li><h:link onclick="getLinkValue(this); PF('dialogToExit').show(); return false;" id="currentPageMarker" value="Reorganizar Pensum" outcome="VistaPOAuto"></h:link></li>
				<li><h:link onclick="getLinkValue(this); PF('dialogToExit').show(); return false;" value="Ayuda" outcome="VistaHelp"></h:link></li>
				<li id="user">
					<a class="dropdownTrigger"  onclick="dropList()" href="#">
						#{studentBean.student.name} #{studentBean.student.last_name}
					</a>
					<h:panelGroup layout="block" id="dropdownContent" class="dropdownClass">
	    					<h:link onclick="getLinkValue(this); PF('dialogToExit').show(); return false;" value="Log Out" outcome="VistaLogin"></h:link>
					</h:panelGroup>
				</li>
			</ul>
		</h:panelGroup>
	</nav>
	
	<h:panelGroup layout="block" id="titleBarMini">
		<p>
			<h:graphicImage id="titleBarImageMini" value="/Vistas/Images/Target-White.png" />
			Materias no Seleccionadas
		</p>
	</h:panelGroup>
	<h:panelGroup layout="block" id="titleBar">
		<p id="PensumRecomendado">
			<h:graphicImage id="titleBarImage" value="/Vistas/Images/Target-White.png" />
			Pensum Actual - Ingeniería de Software 
		</p>
		<p id="Duration"> 
			Duración del Pensum: #{autoPrioritizerBean.pensum.size()} Trimestres
		</p>
	</h:panelGroup>
	
	<h:panelGroup layout="block" id="containerOfPensumTable" >
	<h:form>
		<c:forEach items="#{autoPrioritizerBean.pensum}" var="entry">
			<c:set var="trimesterCuantity" value="#{trimesterCuantity}"></c:set>
			<h:dataTable styleClass="highlight centered bordered" value="#{entry.value}" var="list" >
					<c:set var="trimesterCuantity" value="#{trimesterCuantity + 1}"></c:set>
					<f:facet name="header">
						<p id="tableHead">Trimestre #{trimesterCuantity}</p> 
					</f:facet>
				<h:column>
					<f:facet name="header">
						Clave
					</f:facet>
					#{list.id}
				</h:column>
				<h:column>
					<f:facet name="header">
						Asignatura
					</f:facet>
					#{list.name}
				</h:column>
				<h:column>
					<f:facet name="header">
						Créditos
					</f:facet>
					#{list.credits}
					<f:facet name="footer">
						<c:forEach items="#{entry.value}" var="ls">
							<c:set var="crdTotal" value="#{crdTotal + ls.credits}"></c:set>	
						</c:forEach>
							<p id="totalCreditos">#{crdTotal}</p>
						<c:set var="crdTotal" value="0"></c:set>
					</f:facet>
				</h:column>
				<h:column>
					<f:facet name="header">
						Pre-Requisito
					</f:facet>
						<h:outputText rendered="${fn:length(list.preqID) == '0'}" value="-" />
						<h:outputText rendered="${fn:length(list.preqID) != '0'}" value="#{list.preqID}"/>
				</h:column>
				<h:column>
					<f:facet name="header">
						Co-Requisito
					</f:facet>
						<h:outputText rendered="${fn:length(list.coReqID) == '0'}" value="-" />
						<h:outputText rendered="${fn:length(list.coReqID) != '0'}" value="#{list.preqID}"/>
				</h:column>
				<h:column>
					<f:facet name="header">
						Créditos Requeridos
					</f:facet>
					<h:outputText rendered="#{list.creditsReq != '0'}" value="#{list.creditsReq}" />
					<h:outputText rendered="#{list.creditsReq == '0'}" value="-" />
				</h:column>
				<h:column>
					<h:commandLink action="#{manualOrganizationBean.delete(entry.key, list)}">
						<h:graphicImage value="/Vistas/Images/remove-circle-1.svg" />
					</h:commandLink>
				</h:column>
			</h:dataTable>	
		</c:forEach>
	</h:form>
	</h:panelGroup>
	
	<h:panelGroup layout="block" id="InformationBotonsSubbox">
		<h:panelGroup layout="block" id="subjectsBlock">
			<h:form>
			<h:dataTable id="boxElements" styleClass="highlight centered bordered" value="#{manualOrganizationBean.notSelectedCourses}"
				var="subject">
				<c:set var="materia" value="#{subject}"></c:set>
				<h:column>
					<f:facet name="header">
						Asignatura
					</f:facet>		
					#{subject.name}
				</h:column>
				<h:column>
					<f:facet name="header">
						Pre-Requisito
					</f:facet>
						<h:outputText rendered="${fn:length(subject.preqID) == '0'}" value="-" />
						<h:outputText rendered="${fn:length(subject.preqID) != '0'}" value="#{subject.preqID}"/>
				</h:column>
				<h:column>
					<f:facet name="header">
						Créditos
					</f:facet>
					#{subject.credits}
				</h:column>
				<h:column>
					<f:facet name="header">
					</f:facet>
					<h:commandLink  action="#{manualOrganizationBean.add(3, materia)}">
							<h:graphicImage value="/Vistas/Images/add-circle-1.svg" />
					</h:commandLink>
<!--  					<p:dialog id="dialog" widgetVar="dialogToAdd" closeOnEscape="true"  -->
<!-- 				  			  header="Añadir a Trimestre" closable="false" resizable="false"> -->
<!-- 				  		<h:inputHidden id="data"/> -->
<!-- 						<form id="popUpForm"> -->
<!-- 							<p id="formText">#{materia.name} al Trimestre :</p> -->
<!-- 					   		<p:selectOneMenu -->
					   				
<!-- 					   				onchange="selectGrab(this)" -->
					   				
<!-- 					   				class="DropdownTri"  -->
					   		
<!-- 					   				style="width: 125px;position: relative;bottom: 35px;left: 136px;" -->
					   			
<!-- 					   				> -->
<!--  					   		<c:forEach items="#{autoPOBean.trimester}"> -->
<!-- 					   				<c:set var="trimesterPos" value="#{trimesterPos+1}"></c:set> -->
<!-- 					   				<f:selectItem itemValue="#{trimesterPos}" itemLabel="Trimester #{trimesterPos}"/> -->
<!-- 					   				<c:set var="trimesterPos" value="#{trimesterPos}"></c:set> -->
<!-- 					   			</c:forEach> -->
<!--  					   		</p:selectOneMenu> -->
<!--  							<h:commandButton action="#{manualOrganizationBean.add(autoPrioritizerBean.pensum, 1, materia)}"  value="Aceptar" /> -->
<!--  							<h:commandButton value="Cancelar" /> -->
<!--  						</form> -->
<!-- 					</p:dialog> -->
					
				</h:column>
			</h:dataTable>
			</h:form>
		</h:panelGroup>
		<h:panelGroup layout="block" id="Botons">
			<h:panelGroup layout="block" id="Guardar">
				<h:link class="waves-effect waves-light btn" value="Guardar" outcome="EnConstruccion"></h:link>
			</h:panelGroup>
         	<h:panelGroup layout="block" id="Cancelar">
         		<h:link onclick="PF('dialogToExit').show(); return false;" class="waves-effect waves-light btn" outcome="VistaPOAuto" value="Cancelar">
         		</h:link>
         	</h:panelGroup>
		</h:panelGroup>
	</h:panelGroup>
	
     <p:dialog widgetVar="dialogToExit" closeOnEscape="true" 
			  header="Cancelar cambios" closable="false" resizable="false">
			  
		<form>
			<p id="formText" >Pueden existir cambios no guardados</p>
			<p id="formText">¿Desea salir?</p>
			<h:button value="Si" type="submit" onclick="return outcomeSwich();"></h:button>
			<h:button value="No" type="submit" ></h:button>
		</form>
		
	</p:dialog>
	
	<footer id="footer" class="page-footer">
       <h:panelGroup id="copyright" layout="block" class="footer-copyright">
         <h:panelGroup layout="block" id="copyrightContainer">
          HANDS © 2017
         </h:panelGroup>
       </h:panelGroup>
		
		<h:panelGroup layout="block" id="logoDiv">
			<h:graphicImage id="logo" value="/Vistas/Images/Logo.png" />
		</h:panelGroup>

		<h:panelGroup layout="block" id="intecLogo">
			<h:graphicImage id="intec" value="/Vistas/Images/Logo-intec.png" />
		</h:panelGroup>
	</footer>
  </h:body>
</html>